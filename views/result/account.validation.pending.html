{% set html %}
    <h3 class="govuk-notification-banner__heading">
        The validation of your document '{{accountValidationResult.fileName}}' is in progress
    </h3>
    <p class="govuk-body">Validation in progress. This page will automatically update when it is complete.</p>

    <div class="gds-loading-icon-container">
        <div class="gds-loading-icon"></div>
    </div>

    <script defer>
        const eventSource = new EventSource("{{Urls.RESULT}}/{{fileId}}/sse");

        eventSource.addEventListener('message', (event) => {
            const data = JSON.parse(event.data);
            if(data.message.percent === '100'){
                location.reload();
            }
        });
    </script>

{% endset %}

{{ govukNotificationBanner({
    titleText: 'Pending',
    classes: 'govuk-notification-banner--pending',
    html: html
}) }}